<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<th:block th:replace="fragments/header :: headerFragment"></th:block>
<head>
	<link rel="stylesheet" href="/css/lcg/bizMain.css">
<style type="text/css">
	#biz_id{
		border: none;
		text-align: center;
	}
</style>	
</head>
<script type="text/javascript">
	function chkHidden() {
		var a = confirm("객실이 숨김 처리되어 고객에게 노출되지 않습니다. 진행하시겠습니까?")
		if (a) return true;
		else return false;
	}
	
	function chkOpen() {
		var a = confirm("객실이 공개되어 고객에게 노출됩니다. 진행하시겠습니까?")
		if (a) return true;
		else return false;
	}
	
	function chkDelete() {
		var a = confirm("객실이 삭제되어 마이페이지와 고객에게 노출되지 않습니다. 진행하시겠습니까?")
		if (a) return true;
		else return false;
	}
</script>
<body>
	</th:block>
	<div class="container">
		<div class="accordion accordion-flush" id="accordionFlushExample" style="width: 200px">
			  <div class="accordion-item">
			    <h2 class="accordion-header" id="flush-headingOne">
			      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne">
			        	업체 및 객실관리
			      </button>
			    </h2>
			    <div id="flush-collapseOne" class="accordion-collapse collapse" aria-labelledby="flush-headingOne" data-bs-parent="#accordionFlushExample">
			      <div class="accordion-body">
						<a href="/biz/bizMain">업체관리</a><br>
						<a href="/biz/rooms" >객실관리</a><br>
				  </div>
			    </div>
			  </div>
			  <div class="accordion-item">
			    <h2 class="accordion-header" id="flush-headingTwo">
			      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwo" aria-expanded="false" aria-controls="flush-collapseTwo">
			        	리뷰 및 예약관리
			      </button>
			    </h2>
			    <div id="flush-collapseTwo" class="accordion-collapse collapse" aria-labelledby="flush-headingTwo" data-bs-parent="#accordionFlushExample">
			      <div class="accordion-body">
			       		<a href="/biz/review">리뷰관리</a><br>
			       		예약관리<br>
				  </div>
			    </div>
			  </div>
			  <div class="accordion-item">
			    <h2 class="accordion-header" id="flush-headingThree">
			      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseThree" aria-expanded="false" aria-controls="flush-collapseThree">
			        	계정관리
			      </button>
			    </h2>
			    <div id="flush-collapseThree" class="accordion-collapse collapse" aria-labelledby="flush-headingThree" data-bs-parent="#accordionFlushExample">
			      <div class="accordion-body">
			      	<form action="/biz/usersInfoChkForm" method="POST">
			      		<input type="submit" value="계정정보 변경" name="userAction">
			      		<input type="submit" value="계정 양도" name="userAction">
			      		<input type="submit" value="회원 탈퇴" name="userAction">
			      	</form>
				  </div>
			    </div>
			  </div>
		</div>
		
	<div class="myRooms" >
		<div class="miniTitle">
			<label >내 객실 관리</label>
		</div>
			
		<table class="responsive-table">
	    <thead>
	      <tr>
	         <th scope="col">업체명</th>
	        <th scope="col">객실명</th>
	        <th scope="col">객실코드</th>
	        <th scope="col">가용 인원수</th>
	        <th scope="col">가격</th>
	        <th scope="col">상태</th>
	        <th scope="col">관리</th>
	      </tr>
	    </thead>    
	    <tbody th:each="rooms : ${roomList}">
	    <form action="roomMngChk" method="POST">
	    		<input type="hidden" name="biz_id" 	id="biz_id"   th:value="${rooms.biz_id}">
	    		<input type="hidden" name="r_id" 	id="r_id"	  th:value="${rooms.r_id}">
	    		<input type="hidden" name="r_avail" id="r_avail"  th:value=${rooms.r_avail}>
		      <tr>
		        <th scope="row" 			th:text="${rooms.biz_name}"></th>
		        <td data-title="r_name" 	th:text="${rooms.r_name}"></td>
		        <td data-title="r_code" 	th:text="${rooms.biz_id + rooms.r_id}"></td>
		        <td data-title="r_capacity" th:text="${rooms.r_capacity}"></td>
		        <td data-title="r_price" 	th:text="${rooms.r_price}"></td>
		        <td data-title="r_avail" data-type="currency">
		        	<span th:switch="${rooms.r_avail}">
					    <span th:case="'210'">사용가능</span>
					    <span th:case="'220'">숨김</span>
					    <span th:case="'230'">삭제</span>
					</span> 
					<input th:if="${rooms.r_avail == '210'}" type="submit" name="roomMngChk" value="숨기기" onclick="return chkHidden()">
					<input th:if="${rooms.r_avail == '220'}" type="submit" name="roomMngChk" value="숨김해제" onclick="return chkOpen()">
		        </td>
		        <td data-title="roomMngChk" data-type="currency">
		        	<input type="submit" name="roomMngChk" value="상세확인">
					<input type="submit" name="roomMngChk" value="수정">
					<input type="submit" name="roomMngChk" value="삭제" onclick="return chkDelete()">
				</td>
		      </tr>
	      </form>
	      		<tr></tr>
	    </tbody>
	 </table>
		
		
	<form action="/biz/roomInsertForm" method="POST">
		<div class="d-grid gap-2">
			<button class="btn btn-outline-primary" type="submit">객실 등록하기</button>
		</div>
	</form>	
		</div>
	</div>
</body>
<th:block th:replace="fragments/footer :: footerFragment"></th:block>
</html>