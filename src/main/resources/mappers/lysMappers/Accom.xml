<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.S20230403.accom">
	<select id="yssearchAc" resultType="Accom" parameterType="Accom">
		SELECT
		biz_id , addr , biz_name , description
		FROM
		accom
		where addr LIKE '%' ||
		#{keyword} ||'%' or BIZ_NAME like '%' || #{keyword} || '%'
	</select>
	<select id="ysAccomPage" resultType="int" parameterType="Accom">
		select
		count(*)
		from accom
	</select>
	<select id="ysAccomSearch" parameterType="Accom"
		resultType="Accom">
		SELECT *
		FROM (
		SELECT rownum rn, a.*
		FROM (
		SELECT *
		FROM Accom
		<choose>
		
			<when test="search == 's_biz_id'">
				WHERE biz_id LIKE '%' || #{keyword} || '%'
			</when>
			<when test="search == 's_user_id'">
				WHERE user_id LIKE '%' || #{keyword} || '%'
			</when>
			<when test="search == 's_accom_avail'">
				WHERE ccom_avail LIKE '%' || #{keyword} || '%'
			</when>
			<when test="search == 's_biz_name'">
				WHERE biz_name LIKE '%' || #{keyword} || '%'
			</when>
			<when test="search == 's_addr'">
				WHERE addr LIKE '%' || #{keyword} || '%'
			</when>
			<otherwise>
				WHERE biz_id LIKE '%'
			</otherwise>
		</choose>
		ORDER BY biz_id
		) a ) WHERE rn BETWEEN #{start} AND #{end}
	</select>
	<select id="ysAccomSearchPage" resultType="int"
		parameterType="Accom">
		select count(*)
		from Accom
		where
		<choose>
			<when test="search == 's_biz_id'">
				biz_id like '%' || #{keyword} || '%'
			</when>
			<when test="search == 's_user_id'">
				user_id like '%' || #{keyword} || '%'
			</when>
			<when test="search == 's_accom_avail'">
				accom_avail like '%' || #{keyword} || '%'
			</when>
			<when test="search == 's_biz_name'">
				biz_name like '%' || #{keyword} || '%'
			</when>
			<when test="search == 's_addr'">
				addr like '%' || #{keyword} || '%'
			</when>
			<otherwise>
				biz_id like '%'
			</otherwise>
		</choose>
	</select>

</mapper>